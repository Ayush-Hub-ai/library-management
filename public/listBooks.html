<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>All Books</title>
</head>
<body>
  <h1>ðŸ“š All Books in Library</h1>
  <table border="1" cellpadding="10">
    <thead>
      <tr>
        <th>Title</th>
        <th>Author</th>
        <th>Category</th>
        <th>Year</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody id="bookTable">
      <!-- Rows will be inserted here -->
    </tbody>
  </table>

  <script>
    const tableBody = document.getElementById('bookTable');

    async function loadBooks() {
      const response = await fetch('http://localhost:5000/books');
      const books = await response.json();

      tableBody.innerHTML = '';

      books.forEach(book => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${book.title}</td>
          <td>${book.author}</td>
          <td>${book.category}</td>
          <td>${book.publishedYear}</td>
          <td>${book.description || '-'}</td>  <!-- Add this column --><td>
        <button onclick="editBook('${book._id}')">Edit</button>
        <button onclick="deleteBook('${book._id}')">Delete</button></td>
   `;

        tableBody.appendChild(row);
      });
    }

    async function deleteBook(id) {
      if (!confirm('Are you sure you want to delete this book?')) return;

      const res = await fetch(`http://localhost:5000/books/${id}`, {
        method: 'DELETE'
      });

      const result = await res.json();
      alert(result.message || 'Book deleted');
      loadBooks(); // reload list
    }

    function editBook(id) {
      window.location.href = `editBook.html?id=${id}`;
    }

    loadBooks(); // Initial call
  </script>
</body>
</html>
